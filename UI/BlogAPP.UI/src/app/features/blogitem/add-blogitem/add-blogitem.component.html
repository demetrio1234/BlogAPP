<div class="container m-3">
  <h1 class="mt-3">Add new Post</h1>
  <form (ngSubmit)="onFormSubmit()">
    <div class="mt-2">
      <div class="mt-3">
        <label for="title" class="form-label">Title</label>
        <input
          type="text"
          id="title"
          name="title"
          class="form-control"
          [(ngModel)]="model.title"
        />
      </div>
      <div class="mt-3">
        <label for="shortDescription" class="form-label"
          >Short Description</label
        >
        <input
          type="text"
          id="shortDescription"
          name="shortDescription"
          class="form-control"
        />
      </div>
      <div class="mt-3 d-flex flex-row bd-highlight mb-3">
        <label for="content" class="form-label p-2">Content</label>
        <textarea
          id="content"
          name="content"
          class="form-control me-2 bg-light bg-gradient"
          [(ngModel)]="model.content"
          style="
            min-height: 100px;
            height: 150px;
            min-width: 100px;
            width: 550px;
            max-width: 650px;
          "
        ></textarea>

        <label for="contentpreview" class="form-label"
          >Content MD Preview</label
        >
        <markdown
          [data]="model.content"
          id="contentpreview"
          name="contentpreview"
          class="form-control p-2 border border-primary ms-2 bg-light bg-gradient"
          style="
            min-height: 100px;
            height: 150px;
            min-width: 100px;
            width: 550px;
            max-width: 650px;
          "
        ></markdown>
      </div>
      <div class="mt-3">
        <label for="featuredimageurl" class="form-label"
          >Featured Image URL</label
        >
        <input
          type="text"
          id="featuredimageurl"
          name="featuredimageurl"
          class="form-control"
          [(ngModel)]="model.featuredImageUrl"
        />
        <ng-container *ngIf="model.featuredImageUrl !== ''">
          <img [src]="model.featuredImageUrl" height="200px" class="my-2">
        </ng-container>
      </div>
      <div class="mt-3">
        <label for="urlHandle" class="form-label">URL Handle</label>
        <input
          type="text"
          id="urlHandle"
          name="urlHandle"
          class="form-control"
        />
      </div>

      <div class="mt-3">
        <label for="publishedDate" class="form-label">Published Date</label>
        <input
          type="date"
          id="publishedDate"
          name="publishedDate"
          class="form-control"
          value="{{ model.publishedDate }}"
          [ngModel]="model.publishedDate | date : 'yyyy.MM.dd'"
          (ngModelChange)="model.publishedDate = $event"
        />
      </div>
      <div class="form-check mt-3">
        <input
          type="checkbox"
          id="isVisible"
          name="isVisible"
          class="form-check-input"
          [(ngModel)]="model.isVisible"
        />
        <label for="isVisible" class="form-check-label">Visible</label>
      </div>

      <div class="mt-3">
        <label for="categories" class="form-label mt-3">Category</label>

        <ng-container *ngIf="categories$ | async as categories">
          <select
            class="form-control"
            [(ngModel)]="model.categories"
            name="categories"
            id="categories"
            multiple
          >
            <option
              *ngFor="let category of categories"
              [value]="category.id"
              class="dropdown-item"
            >
              {{ category.name }}
            </option>
          </select>
        </ng-container>
      </div>

      <div class="mt-3">
        <button type="submit" class="btn btn-primary">Save</button>
      </div>
    </div>
  </form>
</div>
